<!DOCTYPE html>
<html>
<head>
	<title>Obaga</title>
	<meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
	 <style>
	   html, body, #map {
	      height:100%;
	      width:100%;
	      padding:0px;
	      margin:0px;
	   }
	</style>
	<script src="http://d3js.org/d3.v3.min.js" charset="utf-8"></script>
	<link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet-0.7.2/leaflet.css" />
	<!--[if lte IE 8]><link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet-0.7.2/leaflet.ie.css" /><![endif]-->

	<link href="//maxcdn.bootstrapcdn.com/font-awesome/4.6.1/css/font-awesome.min.css" rel="stylesheet">
	<link rel="stylesheet" href="lib/leaflet.elevation-0.0.4.css" />
	<link rel="stylesheet" href="./lib/leaflet-gpx/L.Control.Locate.css" />

	<script type="text/javascript" src="http://cdn.leafletjs.com/leaflet-0.7.2/leaflet.js"></script>
	<script type="text/javascript" src="lib/leaflet.elevation-0.0.4.src.js"></script>
	<script type="text/javascript" src="./lib/leaflet-gpx/gpx.js"></script>
	<script src="./lib/leaflet-gpx/L.Control.Locate.js" ></script>
        
</head>
<body>

	<div id="map"></div>

	<script type="text/javascript">
		var map = new L.Map('map');

		var url = 'http://{s}.tile.thunderforest.com/cycle/{z}/{x}/{y}.png',
			attr ='Tessel&middot;les <a href="http://thunderforest.com/opencyclemap/" target="_blank">ThunderForest</a> &mdash; Dades del mapa &copy; Contribu&iuml;dors <a href="http://openstreetmap.org">OpenStreetMap</a>, <a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>',
			service = new L.TileLayer(url, {attribution: attr});

		var el = L.control.elevation();
		el.addTo(map);
		var g=new L.GPX("./gpx/obaga.gpx", {
			async: true,
			 marker_options: {
			    startIconUrl: './lib/leaflet-gpx/pin-icon-start.png',
			    endIconUrl: './lib/leaflet-gpx/pin-icon-end.png',
			    shadowUrl: './lib/leaflet-gpx/pin-shadow.png'
			  }
		});
		g.on('loaded', function(e) {
		  		map.fitBounds(e.target.getBounds());
		});
		g.on("addline",function(e){
			el.addData(e.line);
		});
		g.addTo(map);
		map.addLayer(service);

		lc = L.control.locate({
    		strings: {
      		  title: "Localitza'm al mapa"
  		  }
		}).addTo(map);

	</script>
</body>
</html>
